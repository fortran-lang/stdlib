SRCFYPP =\
        stdlib_bitsets_64.fypp \
        stdlib_bitsets_large.fypp \
        stdlib_bitsets.fypp \
        stdlib_io.fypp \
        stdlib_linalg.fypp \
        stdlib_linalg_diag.fypp \
        stdlib_optval.fypp \
        stdlib_quadrature.fypp \
        stdlib_quadrature_trapz.fypp \
        stdlib_quadrature_simps.fypp \
        stdlib_stats.fypp \
        stdlib_stats_corr.fypp \
        stdlib_stats_cov.fypp \
        stdlib_stats_mean.fypp \
        stdlib_stats_moment.fypp \
        stdlib_stats_moment_all.fypp \
        stdlib_stats_moment_mask.fypp \
        stdlib_stats_moment_scalar.fypp \
        stdlib_stats_var.fypp \
	stdlib_stats_distribution_PRNG.fypp \
	stdlib_stats_distribution_uniform.fypp \
	stdlib_stats_distribution_normal.fypp \
	stdlib_stats_distribution_gamma.fypp \
	stdlib_stats_distribution_special.fypp \
	stdlib_stats_distribution_beta.fypp

SRC = f18estop.f90 \
      stdlib_ascii.f90 \
      stdlib_error.f90 \
      stdlib_kinds.f90 \
      stdlib_logger.f90 \
      $(SRCGEN)

LIB = libstdlib.a


SRCGEN = $(SRCFYPP:.fypp=.f90)
OBJS = $(SRC:.f90=.o)
MODS = $(OBJS:.o=.mod)
SMODS = $(OBJS:.o=*.smod)

.PHONY: all clean

all: $(LIB)

$(LIB): $(OBJS)
	ar rcs $@ $(OBJS)

clean:
	$(RM) $(LIB) $(OBJS) $(MODS) $(SMODS) $(SRCGEN)

%.o: %.f90
	$(FC) $(FFLAGS) -c $<

$(SRCGEN): %.f90: %.fypp common.fypp
	fypp $(FYPPFLAGS) $< $@

# Fortran module dependencies
f18estop.o: stdlib_error.o
stdlib_bitsets.o: stdlib_kinds.o
stdlib_bitsets_64.o: stdlib_bitsets.o
stdlib_bitsets_large.o: stdlib_bitsets.o
stdlib_error.o: stdlib_optval.o
stdlib_io.o: \
	stdlib_error.o \
	stdlib_optval.o \
	stdlib_kinds.o
stdlib_linalg.o: \
	stdlib_kinds.o
stdlib_linalg_diag.o: \
	stdlib_linalg.o \
	stdlib_kinds.o
stdlib_logger.o: stdlib_ascii.o stdlib_optval.o
stdlib_optval.o: stdlib_kinds.o
stdlib_quadrature.o: stdlib_kinds.o
stdlib_quadrature_simps.o: \
	stdlib_quadrature.o \
	stdlib_error.o \
	stdlib_kinds.o
stdlib_quadrature_trapz.o: \
	stdlib_quadrature.o \
	stdlib_error.o \
	stdlib_kinds.o
stdlib_stats.o: \
	stdlib_kinds.o
stdlib_stats_corr.o: \
	stdlib_optval.o \
	stdlib_kinds.o \
	stdlib_stats.o
stdlib_stats_cov.o: \
	stdlib_optval.o \
	stdlib_kinds.o \
	stdlib_stats.o
stdlib_stats_mean.o: \
	stdlib_optval.o \
	stdlib_kinds.o \
	stdlib_stats.o
stdlib_stats_moment.o: \
	stdlib_optval.o \
	stdlib_kinds.o \
	stdlib_stats.o
stdlib_stats_moment_all.o: \
	stdlib_stats_moment.o
stdlib_stats_moment_mask.o: \
	stdlib_stats_moment.o
stdlib_stats_moment_scalar.o: \
	stdlib_stats_moment.o
stdlib_stats_var.o: \
	stdlib_optval.o \
	stdlib_kinds.o \
	stdlib_stats.o
stdlib_stats_distribution_PRNG.o: \
	stdlib_kinds.o \
	stdlib_error.o
stdlib_stats_distribution_uniform.o: \
	stdlib_kinds.o \
	stdlib_error.o \
	stdlib_stats_distribution_PRNG.o
stdlib_stats_distribution_normal.o: \
	stdlib_kinds.o \
	stdlib_error.o \
	stdlib_stats_distribution_PRNG.o \
	stdlib_stats_distribution_uniform.o
stdlib_stats_distribution_special.o: \
	stdlib_kinds.o \
	stdlib_error.o
stdlib_stats_distribution_gamma.o: \
	stdlib_kinds.o \
	stdlib_error.o \
	stdlib_stats_distribution_PRNG.o \
	stdlib_stats_distribution_uniform.o \
	stdlib_stats_distribution_normal.o \
	stdlib_stats_distribution_special.o
stdlib_stats_distribution_beta.o: \
	stdlib_kinds.o \
	stdlib_error.o \
	stdlib_stats_distribution_PRNG.o \
	stdlib_stats_distribution_uniform.o \
	stdlib_stats_distribution_special.o \
	stdlib_stats_distribution_gamma.o
